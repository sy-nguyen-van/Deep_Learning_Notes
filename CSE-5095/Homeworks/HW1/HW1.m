clear all;
x = [5,-1,6,12,7,-5];
[f, df]=myfunc(x)


W= [0.2,-0.5,0.1;0.7 0.3 -0.8]
X=[1.0;-2.0;0.5]
b=[0.1;-0.2]
W*X+b









function [f, df] = myfunc(x)
x1=x(1);x2=x(2);x3=x(3);x4=x(4);x5=x(5);x6=x(6);
P =10;
y = (x1^P + x2^P)^(1/P);
z=5*(y*x3/x4-x5-x6);
u=log(z)+1/2;
f=1/(1+exp(-u));
dy=(x1^P + x2^P)^(1/P-1)
% ==================
df1= f*(1-f)*(1/z)*(dy)*x1^(P-1);
df2= f*(1-f)*(1/z)*(dy)*x2^(P-1);
df3= f*(1-f)*(1/z)*(5*y)*(1/x4);
df4= f*(1-f)*(1/z)*(5*y)*(-x3/x4^2);
df5= f*(1-f)*(1/z)*(5)*(-1);
df6= f*(1-f)*(1/z)*(5)*(-1);
df=[df1;df2;df3;df4;df5;df6]
end

